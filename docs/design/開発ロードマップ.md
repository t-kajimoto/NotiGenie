# NotiGenie 開発ロードマップ

このドキュメントは、NotiGenie開発の作業順序とタスクを定義します。
各タスクには、★☆☆☆☆(簡単)から★★★★★(困難)の難易度評価と、具体的な作業内容の説明が付与されています。

---

## Phase 0: 開発環境構築・セットアップ

開発に着手するための準備段階です。

- [ ] **[★★☆☆☆] Raspberry PiのOSセットアップとネットワーク接続**
    - Raspberry Pi Imagerを使い、OSをSDカードに書き込みます。
    - SSHを有効化し、Wi-Fiに接続してリモートで操作できるようにします。
- [ ] **[★☆☆☆☆] PythonおよびDockerのインストール**
    - aptコマンドを使い、最新のPythonとDockerをインストールします。
    - これにより、アプリケーションの実行環境とコンテナ基盤を整えます。
- [ ] **[★☆☆☆☆] プロジェクト用のGitリポジトリを作成し、Obsidianと連携**
    - GitHub上でリポジトリを作成し、ローカルにクローンします。
    - Obsidian Gitプラグインを設定し、ドキュメントの変更をGitで管理できるようにします。
- [ ] **[★★☆☆☆] Notion APIのセットアップと接続情報の取得**
    - Notionのインテグレーションを作成し、APIキー（Internal Integration Token）を取得します。
    - 操作対象のデータベースをインテグレーションに共有設定します。
- [ ] **[★★☆☆☆] NotionMCPの仕様を確認し、基本的な操作を試す**
    - 公式ドキュメントを読み、NotionMCPのコンセプトを理解します。
    - 簡単なPythonスクリプトで、ページの取得や作成ができることを確認します。
- [ ] **[★☆☆☆☆] Gemini APIキーを取得し、サンプルコードで動作確認**
    - Google AI StudioからAPIキーを発行します。
    - 公式のサンプルコードを使い、APIにリクエストを送信して正常なレスポンスが返ってくることを確認します。
- [ ] **[★★☆☆☆] Google Cloud Speech-to-Text APIを有効化し、動作確認**
    - Google Cloud Platformでプロジェクトを作成し、APIを有効化します。
    - 認証情報（サービスアカウントキー）を設定し、サンプル音声ファイルで文字起こしを試します。
- [ ] **[★☆☆☆☆] テキストを音声に変換するライブラリ（gTTSなど）を選定し、動作確認**
    - Pythonで利用できるText-to-Speechライブラリをいくつか比較検討します。
    - 選定したライブラリで、簡単なテキストを音声ファイルに変換・再生できることを確認します。

---

## Phase 1: MVP（コア機能）開発

アプリケーションの核となる、最低限の機能を実装する段階です。

### Step 1.1: 基本的な音声入出力
- [ ] **[★★☆☆☆] 物理ボタンの押下を検知するスクリプトを作成**
    - Raspberry PiのGPIOピンに接続した物理ボタンの入力を監視します。
    - ボタンが押されたことを検知し、特定の処理を呼び出すイベント駆動のスクリプトを作成します。
- [ ] **[★★☆☆☆] マイクから音声データを録音し、ファイルとして保存する機能を実装**
    - USBマイクなどの入力デバイスから音声ストリームを取得します。
    - 無音区間を検知して録音を自動で停止し、WAVなどの標準的な形式でファイルを保存します。
- [ ] **[★★★☆☆] 録音された音声ファイルをSpeech-to-Text APIに送信し、テキストに変換する機能を実装**
    - 保存された音声ファイルをAPIのエンドポイントに送信します。
    - 返却されたJSONから、変換後のテキストデータを抽出する処理を実装します。
- [ ] **[★★☆☆☆] 任意のテキストを音声ファイルに変換し、再生する機能を実装**
    - アプリケーションからの応答メッセージ（テキスト）をText-to-Speechライブラリに渡します。
    - 生成された音声をリアルタイムで再生し、ユーザーにフィードバックします。

### Step 1.2: クリーンアーキテクチャとAI連携
- [ ] **[★★★★☆] クリーンアーキテクチャに基づいたディレクトリ構造と、主要なクラスのひな形を作成**
    - 関心事を分離するため、Entities, Use Cases, Interface Adapters, Frameworks & Driversの4層に対応するディレクトリを作成します。
    - 各層の責務に応じたクラスのインターフェースと基本的な実装を定義します。
- [ ] **[★★★★☆] ユーザーの発話から、その意図とパラメータを抽出するよう、Gemini APIに指示するプロンプトを設計**
    - 「[買い物リスト]に[牛乳]を追加して」といった自然言語から、意図(Intent)とパラメータ(Entity)をJSON形式で返すようにプロンプトを工夫します。
    - 精度向上のため、Few-shot-learningなどのテクニックも検討します。
- [ ] **[★★★☆☆] 抽出した意図とパラメータを基に、Notionを操作するロジックを実装**
    - AIが返したJSONを解釈し、対応するNotion操作（DBへの行追加、更新など）を実行する処理を実装します。
    - 様々な意図に対応できるよう、汎用的なディスパッチャを設計します。

### Step 1.3: コア機能の実装と連携
- [ ] **[★★★★☆] Step 1.1と1.2を連携させ、一連の流れを実装**
    - ボタン入力、録音、文字起こし、意図解釈、Notion操作、音声応答という一連の処理をパイプラインとして結合します。
    - 各モジュール間のデータの受け渡しを定義し、全体を統合します。
- [ ] **[★★★☆☆] 同様に、「作ったもの（料理在庫）の保存」機能を実装**
    - 「買い物リストへの追加」機能で実装したロジックを拡張します。
    - 新しい意図「料理在庫の保存」を追加し、対応するNotionデータベースへの操作を実装します。

### Step 1.4: GUIの実装
- [ ] **[★★☆☆☆] GUIライブラリ（Tkinter, PySimpleGUIなど）を選定**
    - Pythonで利用可能なGUIライブラリの特性（学習コスト、表現力、Raspberry Piでの動作実績）を比較検討し、プロジェクトに最適なものを選択します。
- [ ] **[★★★☆☆] ユーザーとの対話履歴を表示する、基本的なチャットウィンドウを作成**
    - ユーザーの発話とAIの応答を時系列で表示するシンプルなUIを作成します。
    - テキストの表示エリアと、必要に応じてスクロールバーを実装します。
- [ ] **[★★★★☆] Notionから日付に紐づくイベントを取得し、カレンダー形式で表示するコンポーネントを実装**
    - Notion APIを定期的に呼び出し、食事履歴などのデータを取得します。
    - 取得したデータを整形し、月間カレンダーの該当日付にイベントとして表示するウィジェットを作成します。

---

## Phase 2: 拡張機能と運用の安定化

アプリケーションをより便利にし、継続的な開発を容易にする段階です。

- [ ] **[★★★☆☆] TimeTree APIの仕様を調査し、イベント取得機能を実装**
    - TimeTreeのAPIドキュメントを確認し、OAuth認証フローを実装します。
    - 特定カレンダーの予定を取得し、アプリケーション内で利用できる形式に変換します。
- [ ] **[★★★★☆] LINE Messaging APIなどを利用し、受信した画像をNotionにアップロードする機能を実装**
    - LINE Botを作成し、Webhook URLを設定します。
    - ユーザーから送信された画像メッセージを受け取り、そのバイナリデータをNotion API経由で特定のページにアップロードします。
- [ ] **[★★★☆☆] GitHub Actionsなどを利用したCI/CDパイプラインを構築し、テストの自動化を行う**
    - リポジトリへのpushをトリガーに、自動でテストコードを実行するワークフローを作成します。
    - 将来的には、テスト成功後にDockerイメージをビルドし、自動デプロイする仕組みを目指します。

---

## Phase 3: 高度化と発展

アプリケーションをより洗練させ、新たな価値を付加する段階です。

- [ ] **[★★★★☆] `提案機能`としてリストアップした機能の設計と実装**
    - リマインダーやレシピ提案など、複数の情報を組み合わせて価値を生む機能を設計します。
    - どのデータを使い、どのタイミングで、どのようにユーザーに提示するかを定義し、実装します。
- [ ] **[★★★★★] `要調査`としてリストアップした項目の実現可能性調査と技術検証**
    - VOICEROID連携や3Dモデル表示など、未知数の多い技術の調査を行います。
    - 実現方法、必要なライブラリ、開発コストなどを評価し、小規模なプロトタイプ（PoC）を作成して技術的な実現性を検証します。